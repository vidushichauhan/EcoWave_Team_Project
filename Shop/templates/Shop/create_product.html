{% extends 'Shop/base.html' %}
{% load static %}

{% block content %}
<div class="container mx-auto p-6">
    <div class="bg-white shadow-lg rounded-lg p-8 space-y-8">
        <h1 class="text-3xl font-bold text-amber-900 text-center">Add Your Trade-In Product</h1>
        <form method="post" enctype="multipart/form-data" class="space-y-8">
            {% csrf_token %}

            <!-- Section: Image Upload -->
            <div>
                <h2 class="text-lg font-semibold text-gray-700 mb-4">Upload Product Image</h2>
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-4">
                    <p class="text-sm text-gray-500 text-center mb-4">Drag & drop an image here or click to upload</p>
                    {{ form.image }}
                    <div class="mt-4 flex justify-center">
                        <img id="product-image-preview" src="{% if form.instance.image %}{{ form.instance.image.url }}{% else %}{% static 'images/default.png' %}{% endif %}" alt="Product Image" class="max-w-full max-h-80 object-cover rounded">
                    </div>
                </div>
            </div>

            <!-- Section: Basic Information -->
            <div>
                <h2 class="text-lg font-semibold text-gray-700 mb-4">Basic Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="id_name" class="block text-sm font-medium text-gray-700">Name</label>
                        {{ form.name }}
                    </div>
                    <div>
                        <label for="id_description" class="block text-sm font-medium text-gray-700">Description</label>
                        {{ form.description }}
                    </div>
                </div>
            </div>

            <!-- Section: Pricing Details -->
            <div>
                <h2 class="text-lg font-semibold text-gray-700 mb-4">Pricing Details</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="id_price" class="block text-sm font-medium text-gray-700">Price</label>
                        {{ form.price }}
                    </div>
                    <div>
                        <label for="id_discount_price" class="block text-sm font-medium text-gray-700">Discounted Price</label>
                        {{ form.discount_price }}
                    </div>
                    <div>
                        <label for="id_expiry" class="block text-sm font-medium text-gray-700">Expiry (in days)</label>
                        {{ form.expiry }}
                    </div>
                </div>
            </div>

            <!-- Section: Trade-In Details -->
            <div>
                <h2 class="text-lg font-semibold text-gray-700 mb-4">Trade-In Details</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="id_condition" class="block text-sm font-medium text-gray-700">Condition</label>
                        {{ form.condition }}
                    </div>
                    <div>
                        <label for="id_reason_for_trade_in" class="block text-sm font-medium text-gray-700">Reason for Trade-In</label>
                        {{ form.reason_for_trade_in }}
                    </div>
                    <div>
                        <label for="id_trade_in_preference" class="block text-sm font-medium text-gray-700">Trade-In Preference</label>
                        {{ form.trade_in_preference }}
                    </div>
                    <div>
                        <label for="id_estimated_value" class="block text-sm font-medium text-gray-700">Estimated Value</label>
                        {{ form.estimated_value }}
                    </div>
                    <div>
                        <label for="id_eco_friendly_certification" class="block text-sm font-medium text-gray-700">Eco-Friendly Certification</label>
                        {{ form.eco_friendly_certification }}
                    </div>
                </div>
            </div>

            <!-- Section: Stock Status -->
            <div>
                    <label for="id_in_stock" class="block text-sm font-medium text-black">In Stock</label>
                    <label class="inline-flex items-center cursor-pointer">
                        {{ form.in_stock }}
                        <div class="relative w-11 h-6 bg-white-900 peer-focus:outline-none  dark:peer-focus:ring-white-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-amber-900"></div>
                    </label>
                </div>

            <!-- Submit Button -->
            <div class="text-center">
                <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg shadow-md hover:shadow-lg transition duration-300">
                    Save Product
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    document.getElementById('id_image').addEventListener('change', function(event) {
        const [file] = event.target.files;
        if (file) {
            const preview = document.getElementById('product-image-preview');
            preview.src = URL.createObjectURL(file);
            preview.onload = () => URL.revokeObjectURL(preview.src);
        }
    });
</script>
{% endblock %}
